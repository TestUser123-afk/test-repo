(()=>{var __webpack_modules__={920:function(){let e=window.open;window.open=function(t,r,n){console.log(`Opening URL: ${t} with target: ${r} and features: ${n}`);let a=new URL(t).toString();return a=self.__envade$rewrite.url.rewriteUrl(a),e.call(window,a,"_self",n)}},135:function(){let e=window.performance.getEntries;window.performance.getEntries=function(){return e.call(this).map(e=>["navigation","resource"].includes(e.entryType)?new Proxy(e,{get:(e,t)=>"name"===t?self.__envade$rewrite.url.unwriteUrl(e.name):Reflect.get(e,t)}):e)}},61:function(){function e(e){function t(){let t=`envade$${self.scope$location.host}@`,r=[];for(let n=0;n<e.length;n++){let a=e.key(n);a.startsWith(t)&&r.push(a)}return r}let r=`envade$${self.scope$location.host}@`;return new Proxy(e,{get(e,n){switch(n){case"setItem":return(t,n)=>{e.setItem(r+t,n)};case"getItem":return t=>e.getItem(r+t);case"removeItem":return t=>e.removeItem(r+t);case"clear":return()=>{for(let r of t())e.removeItem(r)};case"length":return t().length;case"key":return e=>{let n=t();return n[e]?n[e].slice(r.length):null};default:return e[n]}},ownKeys:e=>t().map(e=>e.slice(r.length)),getOwnPropertyDescriptor(e,n){if("string"==typeof n&&t().map(e=>e.slice(r.length)).includes(n))return{configurable:!0,enumerable:!0,value:e.getItem(r+n),writable:!0}}})}let t=e(window.localStorage),r=e(window.sessionStorage);Object.defineProperty(window,"localStorage",{value:t,configurable:!0,writable:!1,enumerable:!0}),Object.defineProperty(window,"sessionStorage",{value:r,configurable:!0,writable:!1,enumerable:!0})},823:function(){let e=new Set(["background","background-image","mask","mask-image","list-style","list-style-image","border-image","border-image-source","cursor"]),t=new URL(self.scope$location.origin),r=CSSStyleDeclaration.prototype.setProperty;CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply(r,n,a){let[i,s,o]=a;return e.has(i)?Reflect.apply(r,n,[i,self.__envade$rewrite.css(s,t),o]):Reflect.apply(r,n,a)}})},988:function(){if(self.__envade$config.flags.serviceWorker);else{let e=new Proxy(()=>{},{get:()=>e,apply:()=>e});Object.defineProperty(navigator,"serviceWorker",{get:()=>e,configurable:!0})}},573:function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var _rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(51);let proxy={get href(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().href},set href(url){if(url.startsWith(location.origin)){console.log("Rewriting href (url split)",url=url.slice(location.origin.length)),location.href=self.__envade$rewrite.url.rewriteUrl(url,(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().href);return}console.log("Setting href (full url)",url),location.href=self.__envade$rewrite.url.rewriteUrl(url,(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().href)},get origin(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().origin},get protocol(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().protocol},set protocol(_){},get host(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().host},set host(value){let e=(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)();e.host=value,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get hostname(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().hostname},set hostname(value){let e=(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)();e.hostname=value,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get port(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().port},set port(_){},get pathname(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().pathname},set pathname(val){let e=(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)();e.pathname=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get search(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().search},set search(val){let e=(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)();e.search=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get hash(){return(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().hash},set hash(val){let e=(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)();e.hash=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},toString:()=>(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().toString(),assign(e){location.assign(self.__envade$rewrite.url.rewriteUrl(e,(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().href))},replace(e){location.replace(self.__envade$rewrite.url.rewriteUrl(e,(0,_rewriters_helper_getLocation__WEBPACK_IMPORTED_MODULE_0__.N)().href))},reload(){location.reload()}};["window","globalThis","document","self"].forEach(globalName=>{try{Object.defineProperty(eval(globalName),"scope$location",{configurable:!0,enumerable:!0,get:()=>proxy,set(e){}})}catch(e){}})},51:function(e,t,r){"use strict";function n(){return new URL(self.__envade$config.codec.decode(location.href.slice((location.origin+self.__envade$config.prefix).length)))}r.d(t,{N:()=>n})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(()=>{__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();var __webpack_exports__={};(()=>{"use strict";let e,t,r,n,a;__webpack_require__(573);var i=__webpack_require__(51);let s={nonce:[HTMLElement],integrity:[HTMLScriptElement,HTMLLinkElement],csp:[HTMLIFrameElement],credentialless:[HTMLIFrameElement],src:[HTMLImageElement,HTMLMediaElement,HTMLIFrameElement,HTMLFrameElement,HTMLEmbedElement,HTMLScriptElement,HTMLSourceElement],href:[HTMLAnchorElement,HTMLLinkElement,SVGUseElement,SVGImageElement],data:[HTMLObjectElement],action:[HTMLFormElement],formaction:[HTMLButtonElement,HTMLInputElement],srcdoc:[HTMLIFrameElement],srcset:[HTMLImageElement,HTMLSourceElement],poster:[HTMLVideoElement],imagesrcset:[HTMLLinkElement]},o=new Set(["nonce","integrity","csp"]);function l(e){if(!e)return!1;if("string"!=typeof e&&(e=e.toString()),e.startsWith("#"))return!0;try{return new URL(e,"http://example.com").hash===e}catch{return!1}}for(let[e,t]of Object.entries(s))for(let r of t){let t=Object.getOwnPropertyDescriptor(r.prototype,e);Object.defineProperty(r.prototype,e,{get(){return self.__envade$rewrite.url.unwriteUrl(t.get.call(this),(0,i.N)().href)},set(e){return l(e)||(e=self.__envade$rewrite.url.rewriteUrl(e,(0,i.N)().href)),t.set.call(this,e)},configurable:!0,enumerable:!0})}let h=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML");Object.defineProperty(Element.prototype,"innerHTML",{set(e){let t=this.tagName?.toLowerCase?.()??"";if("script"===t){let t=self.__envade$rewrite.javascript(e,(0,i.N)().href);return h.set.call(this,t)}if("style"===t){let t=self.__envade$rewrite.css(e,(0,i.N)().href);return h.set.call(this,t)}let r=new DOMParser().parseFromString(e,"text/html").body.innerHTML,n=self.__envade$rewrite.html(r,(0,i.N)().href);return h.set.call(this,n)},configurable:!0,enumerable:!0});let d=Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML");Object.defineProperty(Element.prototype,"outerHTML",{set(e){let t=this.tagName?.toLowerCase?.()??"";if("script"===t){let t=self.__envade$rewrite.javascript(e,(0,i.N)().href);return d.set.call(this,t)}if("style"===t){let t=self.__envade$rewrite.css(e,(0,i.N)().href);return d.set.call(this,t)}let r=new DOMParser().parseFromString(e,"text/html").documentElement.outerHTML,n=self.__envade$rewrite.html(r,(0,i.N)().href);return d.set.call(this,n)},configurable:!0,enumerable:!0});let c=Object.getOwnPropertyDescriptor(HTMLImageElement.prototype,"srcset");Object.defineProperty(HTMLImageElement.prototype,"srcset",{get(){return c.get.call(this)},set(e){e=self.__envade$rewrite.srcset(e,(0,i.N)().href),c.set.call(this,e)},configurable:!0,enumerable:!0});let f=Element.prototype.getAttribute;Element.prototype.getAttribute=function(e){return o.has(e)?null:f.call(this,e)};let u=Element.prototype.setAttribute;Element.prototype.setAttribute=function(e,t){let r=(0,i.N)().href;return o.has(e)?u.call(this,e,""):(s[e]&&!l(t)&&(t=self.__envade$rewrite.url.rewriteUrl(t,r)),"style"===e&&(t=self.__envade$rewrite.css(t,r)),e.includes("srcset")&&(t=self.__envade$rewrite.srcset(t,r)),u.call(this,e,t))},window.Audio=new Proxy(window.Audio,{construct:(e,t,r)=>(t[0]&&(t[0]=self.__envade$rewrite.url.rewriteUrl(t[0],(0,i.N)().href)),Reflect.construct(e,t,r))}),Object.defineProperty(document,"domain",{get:()=>(0,i.N)().hostname,configurable:!0}),["URL","baseURI","documentURI","referrer","origin"].forEach(e=>{Object.defineProperty(document,e,{get:()=>(0,i.N)().href,configurable:!0})}),document.write=new Proxy(document.write,{apply(e,t,r){if("string"==typeof r[0])try{let e=new DOMParser().parseFromString(r[0],"text/html");e.querySelectorAll("script").forEach(e=>{e.textContent=self.__envade$rewrite.javascript(e.textContent||"",(0,i.N)().href)}),e.querySelectorAll("style").forEach(e=>{e.textContent=self.__envade$rewrite.css(e.textContent||"",(0,i.N)().href)}),r[0]=e.documentElement.innerHTML}catch{}return Reflect.apply(e,t,r)}}),document.writeln=new Proxy(document.writeln,{apply(e,t,r){if("string"==typeof r[0])try{let e=new DOMParser().parseFromString(r[0],"text/html");e.querySelectorAll("script").forEach(e=>{e.textContent=self.__envade$rewrite.javascript(e.textContent||"",(0,i.N)().href)}),e.querySelectorAll("style").forEach(e=>{e.textContent=self.__envade$rewrite.css(e.textContent||"",(0,i.N)().href)}),r[0]=e.documentElement.innerHTML}catch{}return Reflect.apply(e,t,r)}}),__webpack_require__(823),__webpack_require__(61);let p=(0,i.N)().host,w="";async function g(){w=(await self.__envade$rewrite.cookies.get(p)).join("; ")}function m(e){let t=new URL(e.substring(5));return`blob:${self.scope$location.origin}${t.pathname}`}function b(e){let t=new URL(e.substring(5));return`blob:${location.origin}${t.pathname}`}g(),Object.defineProperty(document,"cookie",{configurable:!0,enumerable:!0,get:()=>w,set(e){self.__envade$rewrite.cookies.set(e,p).then(()=>{g()}).catch(console.error)}}),window.history.pushState=new Proxy(window.history.pushState,{apply:(e,t,r)=>((r[2]||""===r[2])&&(r[2]=self.__envade$rewrite.url.rewriteUrl(r[2],(0,i.N)().href)),Reflect.apply(e,t,r))}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:(e,t,r)=>((r[2]||""===r[2])&&(r[2]=self.__envade$rewrite.url.rewriteUrl(r[2],(0,i.N)().href)),Reflect.apply(e,t,r))}),__webpack_require__(920),__webpack_require__(135);let y=URL.createObjectURL.bind(URL),v=URL.revokeObjectURL.bind(URL);URL.createObjectURL=new Proxy(y,{apply(e,t,r){let n=Reflect.apply(e,t,r);return"string"==typeof n&&n.startsWith("blob:")?m(n):n}}),URL.revokeObjectURL=new Proxy(v,{apply:(e,t,r)=>(r.length>0&&"string"==typeof r[0]&&(r[0]=b(r[0])),Reflect.apply(e,t,r))}),window.eval=new Proxy(window.eval,{apply:(e,t,r)=>(r[0]&&(r[0]=self.__envade$rewrite.javascript(r[0],(0,i.N)())),Reflect.apply(e,t,r))}),window.Function=new Proxy(Function,{construct(e,t){let r=t.length-1;return t[r]&&(t[r]=self.__envade$rewrite.javascript(t[r],(0,i.N)())),Reflect.construct(e,t)}});let k=new Map,x={message(e){let t=e.data;E(e,"origin",{get:()=>(0,i.N)().origin}),E(e,"data",{get:()=>t})},messageerror(e){let t=e.data;E(e,"origin",{get:()=>(0,i.N)().origin}),E(e,"data",{get:()=>t})},hashchange(e){let t=e.oldURL,r=e.newURL;E(e,"oldURL",{get:()=>self.__envade$rewrite.url.unwriteUrl(t)}),E(e,"newURL",{get:()=>self.__envade$rewrite.url.unwriteUrl(r)})},storage(e){let t=e.key,r=e.url;E(e,"_init",{value:()=>t?.startsWith((0,i.N)().host+"@")}),E(e,"key",{get:()=>t?.substring(t.indexOf("@")+1)??null}),E(e,"url",{get:()=>self.__envade$rewrite.url.unwriteUrl(r)})}};function E(e,t,r){try{Object.defineProperty(e,t,{configurable:!0,...r})}catch{}}function R(e,t){return x[e]?new Proxy(t,{apply(t,r,n){let[a]=n;if(a&&"object"==typeof a)try{x[e](a)}catch{}return Reflect.apply(t,r,n)}}):t}window.addEventListener=new Proxy(window.addEventListener,{apply(e,t,r){let[n,a,...i]=r;if("function"!=typeof a)return Reflect.apply(e,t,r);k.has(a)||k.set(a,new Map);let s=k.get(a);return s.has(n)||s.set(n,R(n,a)),Reflect.apply(e,t,[n,s.get(n),...i])}}),window.removeEventListener=new Proxy(window.removeEventListener,{apply(e,t,r){let[n,a,...i]=r;if("function"!=typeof a)return Reflect.apply(e,t,r);let s=k.get(a)?.get(n)||a;return Reflect.apply(e,t,[n,s,...i])}}),window.dispatchEvent=new Proxy(window.dispatchEvent,{apply:(e,t,r)=>Reflect.apply(e,t,r)}),window.Worker=new Proxy(Worker,{construct:(e,t,r)=>(t[0]=self.__envade$rewrite.url.rewriteUrl(t[0],(0,i.N)()),Reflect.construct(e,t,r))}),window.Worklet.prototype.addModule=new Proxy(window.Worklet.prototype.addModule,{apply:(e,t,r)=>(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],(0,i.N)()),Reflect.apply(e,t,r))}),Object.defineProperties(window.navigator,{}),"sendBeacon"in globalThis.navigator&&Object.defineProperty(globalThis.navigator,"sendBeacon",{configurable:!0,writable:!0,value:new Proxy(globalThis.navigator.sendBeacon,{apply:(e,t,r)=>(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],(0,i.N)().href),Reflect.apply(e,t,r))})});let z=window.performance.getEntriesByType;function S(e){return"string"==typeof e&&"*"!==e?self.__envade$rewrite.url.rewriteUrl(e,(0,i.N)().href):e}window.performance.getEntriesByType=function(e){let t=z.call(this,e);return["navigation","resource"].includes(e)?t.map(e=>new Proxy(e,{get:(e,t,r)=>"name"===t?self.__envade$rewrite.url.rewriteUrl(e.name,(0,i.N)().href):Reflect.get(e,t,e)})):t},window.postMessage=new Proxy(window.postMessage,{apply:(e,t,r)=>(r[1]=S(r[1]),Reflect.apply(e,t,r))});let U=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"contentWindow");if(U?.get&&Object.defineProperty(HTMLIFrameElement.prototype,"contentWindow",{get(){let e=U.get.call(this);return!e||e.__envade$postPatched||(e.postMessage=new Proxy(e.postMessage,{apply:(e,t,r)=>(r[1]=S(r[1]),Reflect.apply(e,t,r))}),e.__envade$postPatched=!0),e}}),!MessagePort.prototype.__envade$postPatched){let e=MessagePort.prototype.postMessage;MessagePort.prototype.postMessage=new Proxy(e,{apply:(e,t,r)=>(r[1]=S(r[1]),Reflect.apply(e,t,r))}),MessagePort.prototype.__envade$postPatched=!0}__webpack_require__(988),window.fetch=new Proxy(window.fetch,{apply:(e,t,r)=>(("string"==typeof r[0]||r[0]instanceof URL)&&(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],(0,i.N)().href)),Reflect.apply(e,t,r))}),window.Request=new Proxy(Request,{construct:(e,t,r)=>(("string"==typeof t[0]||t[0]instanceof URL)&&(t[0]=self.__envade$rewrite.url.rewriteUrl(t[0],(0,i.N)().href)),Reflect.construct(e,t,r))});let L=Object.getOwnPropertyDescriptor(Response.prototype,"url");Object.defineProperty(Response.prototype,"url",{get(){let e=L.get.call(this);return self.__envade$rewrite.url.rewriteUrl(e,(0,i.N)().href)},configurable:!0,enumerable:!0});let A=Object.getOwnPropertyDescriptor(Request.prototype,"url");Object.defineProperty(Request.prototype,"url",{get(){let e=A.get.call(this);return self.__envade$rewrite.url.rewriteUrl(e,(0,i.N)().href)},configurable:!0,enumerable:!0});let T=XMLHttpRequest.prototype.open,O=XMLHttpRequest.prototype.send,M=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=new Proxy(T,{apply(e,t,r){let n=r[0],a=r[1];a instanceof URL&&(a=a.href);let s=self.__envade$rewrite.url.rewriteUrl(a,(0,i.N)().href);return r[1]=s,void 0===r[2]&&(r[2]=!0),t.__envade$method=n,t.__envade$url=s,t.__envade$headers={},t.__envade$args=r,Reflect.apply(e,t,r)}}),XMLHttpRequest.prototype.setRequestHeader=new Proxy(M,{apply:(e,t,r)=>(t.__envade$headers||(t.__envade$headers={}),t.__envade$headers[r[0]]=r[1],Reflect.apply(e,t,r))}),XMLHttpRequest.prototype.send=new Proxy(O,{apply(e,t,r){let n=t.__envade$args;if(!n||n[2])return Reflect.apply(e,t,r);let a=t.onreadystatechange;return t.onreadystatechange=function(){if(4===this.readyState){let e=this.status,t=this.responseType,r=this.response,n=this.responseText,i=this.getAllResponseHeaders(),s=new Proxy(this,{get(a,s,o){switch(s){case"status":return e;case"responseText":return n;case"response":return"arraybuffer"===t?r:n;case"responseXML":return new DOMParser().parseFromString(n,"text/xml");case"getAllResponseHeaders":return()=>i;case"getResponseHeader":return e=>{let t=RegExp(`^${e}: (.*)$`,"mi").exec(i);return t?t[1]:null};case"responseURL":return self.__envade$rewrite.url.unwriteUrl?.(this.__envade$url||"")||this.__envade$url;default:return Reflect.get(a,s,o)}}});"function"==typeof a&&a.call(s)}else"function"==typeof a&&a.call(this)},Reflect.apply(e,t,r)}});let P=globalThis.fetch,N=globalThis.SharedWorker,$=globalThis.localStorage,C=globalThis.navigator.serviceWorker,H=MessagePort.prototype.postMessage,D={prototype:{send:WebSocket.prototype.send},CLOSED:WebSocket.CLOSED,CLOSING:WebSocket.CLOSING,CONNECTING:WebSocket.CONNECTING,OPEN:WebSocket.OPEN};async function I(){let e=Promise.race([Promise.any((await self.clients.matchAll({type:"window",includeUncontrolled:!0})).map(async e=>{let t=await function(e){let t=new MessageChannel;return new Promise(r=>{e.postMessage({type:"getPort",port:t.port2},[t.port2]),t.port1.onmessage=e=>{r(e.data)}})}(e);return await j(t),t})),new Promise((e,t)=>setTimeout(t,1e3,TypeError("timeout")))]);try{return await e}catch(e){if(e instanceof AggregateError)throw console.error("bare-mux: failed to get a bare-mux SharedWorker MessagePort as all clients returned an invalid MessagePort."),Error("All clients returned an invalid MessagePort.");return console.warn("bare-mux: failed to get a bare-mux SharedWorker MessagePort within 1s, retrying"),await I()}}function j(e){let t=new MessageChannel,r=new Promise((e,r)=>{t.port1.onmessage=t=>{"pong"===t.data.type&&e()},setTimeout(r,1500)});return H.call(e,{message:{type:"ping"},port:t.port2},[t.port2]),r}function Z(e,t){let r=new N(e,"bare-mux-worker");return t&&C.addEventListener("message",t=>{if("getPort"===t.data.type&&t.data.port){console.debug("bare-mux: recieved request for port from sw");let r=new N(e,"bare-mux-worker");H.call(t.data.port,r.port,[r.port])}}),r.port}let B=null;class F{constructor(e){this.channel=new BroadcastChannel("bare-mux"),e instanceof MessagePort||e instanceof Promise?this.port=e:this.createChannel(e,!0)}createChannel(e,t){if(self.clients)this.port=I(),this.channel.onmessage=e=>{"refreshPort"===e.data.type&&(this.port=I())};else if(e&&SharedWorker){if(!e.startsWith("/")&&!e.includes("://"))throw Error("Invalid URL. Must be absolute or start at the root.");this.port=Z(e,t),console.debug("bare-mux: setting localStorage bare-mux-path to",e),$["bare-mux-path"]=e}else{if(!SharedWorker)throw Error("Unable to get a channel to the SharedWorker.");{let e=$["bare-mux-path"];if(console.debug("bare-mux: got localStorage bare-mux-path:",e),!e)throw Error("Unable to get bare-mux workerPath from localStorage.");this.port=Z(e,t)}}}async sendMessage(e,t){this.port instanceof Promise&&(this.port=await this.port);try{await j(this.port)}catch{return console.warn("bare-mux: Failed to get a ping response from the worker within 1.5s. Assuming port is dead."),this.createChannel(),await this.sendMessage(e,t)}let r=new MessageChannel,n=[r.port2,...t||[]],a=new Promise((e,t)=>{r.port1.onmessage=r=>{let n=r.data;"error"===n.type?t(n.error):e(n)}});return H.call(this.port,{message:e,port:r.port2},n),await a}}class W extends EventTarget{constructor(e,t=[],r,n){super(),this.protocols=t,this.readyState=D.CONNECTING,this.url=e.toString(),this.protocols=t;let a=e=>{this.protocols=e,this.readyState=D.OPEN;let t=new Event("open");this.dispatchEvent(t)},i=async e=>{let t=new MessageEvent("message",{data:e});this.dispatchEvent(t)},s=(e,t)=>{this.readyState=D.CLOSED;let r=new CloseEvent("close",{code:e,reason:t});this.dispatchEvent(r)},o=()=>{this.readyState=D.CLOSED;let e=new Event("error");this.dispatchEvent(e)};this.channel=new MessageChannel,this.channel.port1.onmessage=e=>{"open"===e.data.type?a(e.data.args[0]):"message"===e.data.type?i(e.data.args[0]):"close"===e.data.type?s(e.data.args[0],e.data.args[1]):"error"===e.data.type&&o()},r.sendMessage({type:"websocket",websocket:{url:e.toString(),protocols:t,requestHeaders:n,channel:this.channel.port2}},[this.channel.port2])}send(...e){if(this.readyState===D.CONNECTING)throw new DOMException("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state.");let t=e[0];t.buffer&&(t=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)),H.call(this.channel.port1,{type:"data",data:t},t instanceof ArrayBuffer?[t]:[])}close(e,t){H.call(this.channel.port1,{type:"close",closeCode:e,closeReason:t})}}function q(e){for(let t=0;t<e.length;t++){let r=e[t];if(!"!#$%&'*+-.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ^_`abcdefghijklmnopqrstuvwxyz|~".includes(r))return!1}return!0}let G=["ws:","wss:"],X=[101,204,205,304],K=[301,302,303,307,308];class Y{constructor(e){this.worker=new F(e)}createWebSocket(e,t=[],r,n){try{e=new URL(e)}catch(t){throw new DOMException(`Faiiled to construct 'WebSocket': The URL '${e}' is invalid.`)}if(!G.includes(e.protocol))throw new DOMException(`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${e.protocol}' is not allowed.`);for(let e of(Array.isArray(t)||(t=[t]),t=t.map(String)))if(!q(e))throw new DOMException(`Failed to construct 'WebSocket': The subprotocol '${e}' is invalid.`);return n=n||{},new W(e,t,this.worker,n)}async fetch(e,t){let r=new Request(e,t),n=t?.headers||r.headers,a=n instanceof Headers?Object.fromEntries(n):n,i=r.body,s=new URL(r.url);if(s.protocol.startsWith("blob:")){let e=await P(s),t=new Response(e.body,e);return t.rawHeaders=Object.fromEntries(e.headers),t}for(let e=0;;e++){let n=(await this.worker.sendMessage({type:"fetch",fetch:{remote:s.toString(),method:r.method,headers:a,body:i||void 0}},i?[i]:[])).fetch,o=new Response(X.includes(n.status)?void 0:n.body,{headers:new Headers(n.headers),status:n.status,statusText:n.statusText});o.rawHeaders=n.headers,o.rawResponse=n,o.finalURL=s.toString();let l=t?.redirect||r.redirect;if(!K.includes(o.status))return o;switch(l){case"follow":{let t=o.headers.get("location");if(20>e&&null!==t){s=new URL(t,s);continue}throw TypeError("Failed to fetch")}case"error":throw TypeError("Failed to fetch");case"manual":return o}}}}console.debug("bare-mux: running v2.1.7 (build c56d286)");let V=4,J=0,Q=1,ee=2;function et(e){let t=e.length;for(;--t>=0;)e[t]=0}let er=0,en=1,ea=2,ei=3,es=258,eo=29,el=256,eh=286,ed=30,ec=19,ef=573,eu=15,e_=16,ep=7,ew=256,eg=16,em=17,eb=18,ey=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ev=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ek=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ex=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eE=512,eR=Array((eh+2)*2);et(eR);let ez=Array(2*ed);et(ez);let eS=Array(eE);et(eS);let eU=Array(es-ei+1);et(eU);let eL=Array(eo);et(eL);let eA=Array(ed);function eT(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function eO(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}et(eA);let eM=e=>e<256?eS[e]:eS[256+(e>>>7)],eP=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},eN=(e,t,r)=>{e.bi_valid>e_-r?(e.bi_buf|=t<<e.bi_valid&65535,eP(e,e.bi_buf),e.bi_buf=t>>e_-e.bi_valid,e.bi_valid+=r-e_):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},e$=(e,t,r)=>{eN(e,r[2*t],r[2*t+1])},eC=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},eH=e=>{16===e.bi_valid?(eP(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},eD=(e,t)=>{let r,n,a,i,s,o,l=t.dyn_tree,h=t.max_code,d=t.stat_desc.static_tree,c=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,p=t.stat_desc.max_length,w=0;for(i=0;i<=eu;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<ef;r++)(i=l[2*l[2*(n=e.heap[r])+1]+1]+1)>p&&(i=p,w++),l[2*n+1]=i,!(n>h)&&(e.bl_count[i]++,s=0,n>=u&&(s=f[n-u]),o=l[2*n],e.opt_len+=o*(i+s),c&&(e.static_len+=o*(d[2*n+1]+s)));if(0!==w){do{for(i=p-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[p]--,w-=2}while(w>0);for(i=p;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((a=e.heap[--r])>h)&&(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),n--)}},eI=(e,t,r)=>{let n,a,i=Array(eu+1),s=0;for(n=1;n<=eu;n++)s=s+r[n-1]<<1,i[n]=s;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=eC(i[t]++,t))}},ej=()=>{let n,a,i,s,o,l=Array(eu+1);for(s=0,i=0;s<eo-1;s++)for(n=0,eL[s]=i;n<1<<ey[s];n++)eU[i++]=s;for(eU[i-1]=s,o=0,s=0;s<16;s++)for(n=0,eA[s]=o;n<1<<ev[s];n++)eS[o++]=s;for(o>>=7;s<ed;s++)for(n=0,eA[s]=o<<7;n<1<<ev[s]-7;n++)eS[256+o++]=s;for(a=0;a<=eu;a++)l[a]=0;for(n=0;n<=143;)eR[2*n+1]=8,n++,l[8]++;for(;n<=255;)eR[2*n+1]=9,n++,l[9]++;for(;n<=279;)eR[2*n+1]=7,n++,l[7]++;for(;n<=287;)eR[2*n+1]=8,n++,l[8]++;for(eI(eR,eh+1,l),n=0;n<ed;n++)ez[2*n+1]=5,ez[2*n]=eC(n,5);e=new eT(eR,ey,el+1,eh,eu),t=new eT(ez,ev,0,ed,eu),r=new eT([],ek,0,ec,ep)},eZ=e=>{let t;for(t=0;t<eh;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ed;t++)e.dyn_dtree[2*t]=0;for(t=0;t<ec;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*ew]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},eB=e=>{e.bi_valid>8?eP(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},eF=(e,t,r,n)=>{let a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},eW=(e,t,r)=>{let n=e.heap[r],a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&eF(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!eF(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},eq=(e,t,r)=>{let n,a,i,s,o=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),a=e.pending_buf[e.sym_buf+o++],0===n?e$(e,a,t):(e$(e,(i=eU[a])+el+1,t),0!==(s=ey[i])&&eN(e,a-=eL[i],s),e$(e,i=eM(--n),r),0!==(s=ev[i])&&eN(e,n-=eA[i],s));while(o<e.sym_next);e$(e,ew,t)},eG=(e,t)=>{let r,n,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(r=0,e.heap_len=0,e.heap_max=ef;r<l;r++)0!==i[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=h,r=e.heap_len>>1;r>=1;r--)eW(e,i,r);a=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],eW(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,eW(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],eD(e,t),eI(i,h,e.bl_count)},eX=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],++o<l&&a===s||(o<h?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*eg]++):o<=10?e.bl_tree[2*em]++:e.bl_tree[2*eb]++,o=0,i=a,0===s?(l=138,h=3):a===s?(l=6,h=3):(l=7,h=4))},eK=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++o<l)||a!==s){if(o<h)do e$(e,a,e.bl_tree);while(0!=--o);else 0!==a?(a!==i&&(e$(e,a,e.bl_tree),o--),e$(e,eg,e.bl_tree),eN(e,o-3,2)):o<=10?(e$(e,em,e.bl_tree),eN(e,o-3,3)):(e$(e,eb,e.bl_tree),eN(e,o-11,7));o=0,i=a,0===s?(l=138,h=3):a===s?(l=6,h=3):(l=7,h=4)}},eY=e=>{let t;for(eX(e,e.dyn_ltree,e.l_desc.max_code),eX(e,e.dyn_dtree,e.d_desc.max_code),eG(e,e.bl_desc),t=ec-1;t>=3&&0===e.bl_tree[2*ex[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},eV=(e,t,r,n)=>{let a;for(eN(e,t-257,5),eN(e,r-1,5),eN(e,n-4,4),a=0;a<n;a++)eN(e,e.bl_tree[2*ex[a]+1],3);eK(e,e.dyn_ltree,t-1),eK(e,e.dyn_dtree,r-1)},eJ=e=>{let t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return J;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Q;for(t=32;t<el;t++)if(0!==e.dyn_ltree[2*t])return Q;return J},eQ=!1,e0=(e,t,r,n)=>{eN(e,(er<<1)+ +!!n,3),eB(e),eP(e,r),eP(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},e1=(e,t,r,n)=>{let a,i,s=0;e.level>0?(e.strm.data_type===ee&&(e.strm.data_type=eJ(e)),eG(e,e.l_desc),eG(e,e.d_desc),s=eY(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?e0(e,t,r,n):e.strategy===V||i===a?(eN(e,(en<<1)+ +!!n,3),eq(e,eR,ez)):(eN(e,(ea<<1)+ +!!n,3),eV(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),eq(e,e.dyn_ltree,e.dyn_dtree)),eZ(e),n&&eB(e)};var e2={_tr_init:n=>{eQ||(ej(),eQ=!0),n.l_desc=new eO(n.dyn_ltree,e),n.d_desc=new eO(n.dyn_dtree,t),n.bl_desc=new eO(n.bl_tree,r),n.bi_buf=0,n.bi_valid=0,eZ(n)},_tr_stored_block:e0,_tr_flush_block:e1,_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(eU[r]+el+1)*2]++,e.dyn_dtree[2*eM(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{eN(e,en<<1,3),e$(e,ew,eR),eH(e)}},e5=(e,t,r,n)=>{let a=65535&e,i=e>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+(a=a+t[n++]|0)|0;while(--s);a%=65521,i%=65521}return a|i<<16};let e6=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t})());var e3=(e,t,r,n)=>{let a=e6,i=n+r;e^=-1;for(let r=n;r<i;r++)e=e>>>8^a[(e^t[r])&255];return -1^e},e8={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},e4={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:e9,_tr_stored_block:e7,_tr_flush_block:te,_tr_tally:tt,_tr_align:tr}=e2,{Z_NO_FLUSH:tn,Z_PARTIAL_FLUSH:ta,Z_FULL_FLUSH:ti,Z_FINISH:ts,Z_BLOCK:to,Z_OK:tl,Z_STREAM_END:th,Z_STREAM_ERROR:td,Z_DATA_ERROR:tc,Z_BUF_ERROR:tf,Z_DEFAULT_COMPRESSION:tu,Z_FILTERED:t_,Z_HUFFMAN_ONLY:tp,Z_RLE:tw,Z_FIXED:tg,Z_DEFAULT_STRATEGY:tm,Z_UNKNOWN:tb,Z_DEFLATED:ty}=e4,tv=9,tk=15,tx=8,tE=286,tR=30,tz=19,tS=573,tU=15,tL=3,tA=258,tT=262,tO=32,tM=42,tP=57,tN=69,t$=73,tC=91,tH=103,tD=113,tI=666,tj=1,tZ=2,tB=3,tF=4,tW=3,tq=(e,t)=>(e.msg=e8[t],t),tG=e=>2*e-9*(e>4),tX=e=>{let t=e.length;for(;--t>=0;)e[t]=0},tK=e=>{let t,r,n,a=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);n=t=a;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)},tY=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,tV=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},tJ=(e,t)=>{te(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tV(e.strm)},tQ=(e,t)=>{e.pending_buf[e.pending++]=t},t0=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},t1=(e,t,r,n)=>{let a=e.avail_in;return(a>n&&(a=n),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=e5(e.adler,t,a,r):2===e.state.wrap&&(e.adler=e3(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},t2=(e,t)=>{let r,n,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-tT?e.strstart-(e.w_size-tT):0,h=e.window,d=e.w_mask,c=e.prev,f=e.strstart+tA,u=h[i+s-1],p=h[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(h[(r=t)+s]!==p||h[r+s-1]!==u||h[r]!==h[i]||h[++r]!==h[i+1])continue;i+=2,r++;do;while(h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&h[++i]===h[++r]&&i<f);if(n=tA-(f-i),i=f-tA,n>s){if(e.match_start=t,s=n,n>=o)break;u=h[i+s-1],p=h[i+s]}}while((t=c[t&d])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead},t5=e=>{let t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-tT)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),tK(e),r+=a),0===e.strm.avail_in)break;if(t=t1(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=tL)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=tY(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=tY(e,e.ins_h,e.window[n+tL-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<tL)););}while(e.lookahead<tT&&0!==e.strm.avail_in)},t6=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n>(a=e.strstart-e.block_start)+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(0===n&&t!==ts||t===tn||n!==a+e.strm.avail_in)))break;s=+(t===ts&&n===a+e.strm.avail_in),e7(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,tV(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(t1(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?tF:t!==tn&&t!==ts&&0===e.strm.avail_in&&e.strstart===e.block_start?tZ:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(t1(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,r=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((a=e.strstart-e.block_start)>=r||(a||t===ts)&&t!==tn&&0===e.strm.avail_in&&a<=i)&&(n=a>i?i:a,s=+(t===ts&&0===e.strm.avail_in&&n===a),e7(e,e.block_start,n,s),e.block_start+=n,tV(e.strm)),s?tB:tj)},t3=(e,t)=>{let r,n;for(;;){if(e.lookahead<tT){if(t5(e),e.lookahead<tT&&t===tn)return tj;if(0===e.lookahead)break}if(r=0,e.lookahead>=tL&&(e.ins_h=tY(e,e.ins_h,e.window[e.strstart+tL-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-tT&&(e.match_length=t2(e,r)),e.match_length>=tL)if(n=tt(e,e.strstart-e.match_start,e.match_length-tL),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=tL){e.match_length--;do e.strstart++,e.ins_h=tY(e,e.ins_h,e.window[e.strstart+tL-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=tY(e,e.ins_h,e.window[e.strstart+1]);else n=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(tJ(e,!1),0===e.strm.avail_out))return tj}return(e.insert=e.strstart<tL-1?e.strstart:tL-1,t===ts)?(tJ(e,!0),0===e.strm.avail_out)?tB:tF:e.sym_next&&(tJ(e,!1),0===e.strm.avail_out)?tj:tZ},t8=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<tT){if(t5(e),e.lookahead<tT&&t===tn)return tj;if(0===e.lookahead)break}if(r=0,e.lookahead>=tL&&(e.ins_h=tY(e,e.ins_h,e.window[e.strstart+tL-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=tL-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-tT&&(e.match_length=t2(e,r),e.match_length<=5&&(e.strategy===t_||e.match_length===tL&&e.strstart-e.match_start>4096)&&(e.match_length=tL-1)),e.prev_length>=tL&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-tL,n=tt(e,e.strstart-1-e.prev_match,e.prev_length-tL),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=tY(e,e.ins_h,e.window[e.strstart+tL-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=tL-1,e.strstart++,n&&(tJ(e,!1),0===e.strm.avail_out))return tj}else if(e.match_available){if((n=tt(e,0,e.window[e.strstart-1]))&&tJ(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return tj}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=tt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<tL-1?e.strstart:tL-1,t===ts)?(tJ(e,!0),0===e.strm.avail_out)?tB:tF:e.sym_next&&(tJ(e,!1),0===e.strm.avail_out)?tj:tZ},t4=(e,t)=>{let r,n,a,i,s=e.window;for(;;){if(e.lookahead<=tA){if(t5(e),e.lookahead<=tA&&t===tn)return tj;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=tL&&e.strstart>0&&(n=s[a=e.strstart-1])===s[++a]&&n===s[++a]&&n===s[++a]){i=e.strstart+tA;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i);e.match_length=tA-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=tL?(r=tt(e,1,e.match_length-tL),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(tJ(e,!1),0===e.strm.avail_out))return tj}return(e.insert=0,t===ts)?(tJ(e,!0),0===e.strm.avail_out)?tB:tF:e.sym_next&&(tJ(e,!1),0===e.strm.avail_out)?tj:tZ},t9=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(t5(e),0===e.lookahead)){if(t===tn)return tj;break}if(e.match_length=0,r=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(tJ(e,!1),0===e.strm.avail_out))return tj}return(e.insert=0,t===ts)?(tJ(e,!0),0===e.strm.avail_out)?tB:tF:e.sym_next&&(tJ(e,!1),0===e.strm.avail_out)?tj:tZ};function t7(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}let re=[new t7(0,0,0,0,t6),new t7(4,4,8,4,t3),new t7(4,5,16,8,t3),new t7(4,6,32,32,t3),new t7(4,4,16,16,t8),new t7(8,16,32,32,t8),new t7(8,16,128,128,t8),new t7(8,32,128,256,t8),new t7(32,128,258,1024,t8),new t7(32,258,258,4096,t8)],rt=e=>{e.window_size=2*e.w_size,tX(e.head),e.max_lazy_match=re[e.level].max_lazy,e.good_match=re[e.level].good_length,e.nice_match=re[e.level].nice_length,e.max_chain_length=re[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=tL-1,e.match_available=0,e.ins_h=0};function rr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ty,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*tS),this.dyn_dtree=new Uint16Array((2*tR+1)*2),this.bl_tree=new Uint16Array((2*tz+1)*2),tX(this.dyn_ltree),tX(this.dyn_dtree),tX(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tU+1),this.heap=new Uint16Array(2*tE+1),tX(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*tE+1),tX(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let rn=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(t.status===tM||t.status===tP||t.status===tN||t.status===t$||t.status===tC||t.status===tH||t.status===tD||t.status===tI)?0:1},ra=e=>{if(rn(e))return tq(e,td);e.total_in=e.total_out=0,e.data_type=tb;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?tP:t.wrap?tM:tD,e.adler=+(2!==t.wrap),t.last_flush=-2,e9(t),tl},ri=e=>{let t=ra(e);return t===tl&&rt(e.state),t},rs=(e,t,r,n,a,i)=>{if(!e)return td;let s=1;if(t===tu&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>tv||r!==ty||n<8||n>15||t<0||t>9||i<0||i>tg||8===n&&1!==s)return tq(e,td);8===n&&(n=9);let o=new rr;return e.state=o,o.strm=e,o.status=tM,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+tL-1)/tL),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=r,ri(e)};var ro={deflateInit2:rs,deflateSetHeader:(e,t)=>rn(e)||2!==e.state.wrap?td:(e.state.gzhead=t,tl),deflate:(e,t)=>{if(rn(e)||t>to||t<0)return e?tq(e,td):td;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===tI&&t!==ts)return tq(e,0===e.avail_out?tf:td);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(tV(e),0===e.avail_out)return r.last_flush=-1,tl}else if(0===e.avail_in&&tG(t)<=tG(n)&&t!==ts)return tq(e,tf);if(r.status===tI&&0!==e.avail_in)return tq(e,tf);if(r.status===tM&&0===r.wrap&&(r.status=tD),r.status===tM){let t=ty+(r.w_bits-8<<4)<<8,n=-1;if(t|=(n=r.strategy>=tp||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=tO),t0(r,t+=31-t%31),0!==r.strstart&&(t0(r,e.adler>>>16),t0(r,65535&e.adler)),e.adler=1,r.status=tD,tV(e),0!==r.pending)return r.last_flush=-1,tl}if(r.status===tP){if(e.adler=0,tQ(r,31),tQ(r,139),tQ(r,8),r.gzhead)tQ(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),tQ(r,255&r.gzhead.time),tQ(r,r.gzhead.time>>8&255),tQ(r,r.gzhead.time>>16&255),tQ(r,r.gzhead.time>>24&255),tQ(r,9===r.level?2:4*(r.strategy>=tp||r.level<2)),tQ(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(tQ(r,255&r.gzhead.extra.length),tQ(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=e3(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=tN;else if(tQ(r,0),tQ(r,0),tQ(r,0),tQ(r,0),tQ(r,0),tQ(r,9===r.level?2:4*(r.strategy>=tp||r.level<2)),tQ(r,tW),r.status=tD,tV(e),0!==r.pending)return r.last_flush=-1,tl}if(r.status===tN){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=e3(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,tV(e),0!==r.pending)return r.last_flush=-1,tl;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=e3(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=t$}if(r.status===t$){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=e3(e.adler,r.pending_buf,r.pending-n,n)),tV(e),0!==r.pending)return r.last_flush=-1,tl;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,tQ(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=e3(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=tC}if(r.status===tC){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=e3(e.adler,r.pending_buf,r.pending-n,n)),tV(e),0!==r.pending)return r.last_flush=-1,tl;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,tQ(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=e3(e.adler,r.pending_buf,r.pending-n,n))}r.status=tH}if(r.status===tH){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(tV(e),0!==r.pending))return r.last_flush=-1,tl;tQ(r,255&e.adler),tQ(r,e.adler>>8&255),e.adler=0}if(r.status=tD,tV(e),0!==r.pending)return r.last_flush=-1,tl}if(0!==e.avail_in||0!==r.lookahead||t!==tn&&r.status!==tI){let n=0===r.level?t6(r,t):r.strategy===tp?t9(r,t):r.strategy===tw?t4(r,t):re[r.level].func(r,t);if((n===tB||n===tF)&&(r.status=tI),n===tj||n===tB)return 0===e.avail_out&&(r.last_flush=-1),tl;if(n===tZ&&(t===ta?tr(r):t!==to&&(e7(r,0,0,!1),t===ti&&(tX(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tV(e),0===e.avail_out))return r.last_flush=-1,tl}return t!==ts?tl:r.wrap<=0?th:(2===r.wrap?(tQ(r,255&e.adler),tQ(r,e.adler>>8&255),tQ(r,e.adler>>16&255),tQ(r,e.adler>>24&255),tQ(r,255&e.total_in),tQ(r,e.total_in>>8&255),tQ(r,e.total_in>>16&255),tQ(r,e.total_in>>24&255)):(t0(r,e.adler>>>16),t0(r,65535&e.adler)),tV(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tl:th)},deflateEnd:e=>{if(rn(e))return td;let t=e.state.status;return e.state=null,t===tD?tq(e,tc):tl},deflateSetDictionary:(e,t)=>{let r=t.length;if(rn(e))return td;let n=e.state,a=n.wrap;if(2===a||1===a&&n.status!==tM||n.lookahead)return td;if(1===a&&(e.adler=e5(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(tX(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,t5(n);n.lookahead>=tL;){let e=n.strstart,t=n.lookahead-(tL-1);do n.ins_h=tY(n,n.ins_h,n.window[e+tL-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t);n.strstart=e,n.lookahead=tL-1,t5(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=tL-1,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,n.wrap=a,tl}};let rl=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var rh={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)rl(r,t)&&(e[t]=r[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}};let rd=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){rd=!1}let rc=new Uint8Array(256);for(let e=0;e<256;e++)rc[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;rc[254]=rc[254]=1;let rf=(e,t)=>{if(t<65534&&e.subarray&&rd)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var ru={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),o+=r<128?1:r<2048?2:r<65536?3:4;for(i=0,t=new Uint8Array(o),a=0;i<o;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},buf2string:(e,t)=>{let r,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i=Array(2*a);for(n=0,r=0;r<a;){let t=e[r++];if(t<128){i[n++]=t;continue}let s=rc[t];if(s>4){i[n++]=65533,r+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&r<a;)t=t<<6|63&e[r++],s--;if(s>1){i[n++]=65533;continue}t<65536?i[n++]=t:(t-=65536,i[n++]=55296|t>>10&1023,i[n++]=56320|1023&t)}return rf(i,n)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+rc[e[r]]>t?r:t}},r_=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let rp=Object.prototype.toString,{Z_NO_FLUSH:rw,Z_SYNC_FLUSH:rg,Z_FULL_FLUSH:rm,Z_FINISH:rb,Z_OK:ry,Z_STREAM_END:rv,Z_DEFAULT_COMPRESSION:rk,Z_DEFAULT_STRATEGY:rx,Z_DEFLATED:rE}=e4;function rR(e){this.options=rh.assign({level:rk,method:rE,chunkSize:16384,windowBits:15,memLevel:8,strategy:rx},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r_,this.strm.avail_out=0;let r=ro.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==ry)throw Error(e8[r]);if(t.header&&ro.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?ru.string2buf(t.dictionary):"[object ArrayBuffer]"===rp.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=ro.deflateSetDictionary(this.strm,e))!==ry)throw Error(e8[r]);this._dict_set=!0}}function rz(e,t){let r=new rR(t);if(r.push(e,!0),r.err)throw r.msg||e8[r.err];return r.result}function rS(e,t){return(t=t||{}).raw=!0,rz(e,t)}function rU(e,t){return(t=t||{}).gzip=!0,rz(e,t)}rR.prototype.push=function(e,t){let r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?rb:rw,"string"==typeof e?a.input=ru.string2buf(e):"[object ArrayBuffer]"===rp.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===rg||n===rm)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if((r=ro.deflate(a,n))===rv)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=ro.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ry;if(0===a.avail_out){this.onData(a.output);continue}if(n>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(0===a.avail_in)break}return!0},rR.prototype.onData=function(e){this.chunks.push(e)},rR.prototype.onEnd=function(e){e===ry&&(this.result=rh.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var rL={Deflate:rR,deflate:rz,deflateRaw:rS,gzip:rU,constants:e4};let rA=16209,rT=16191;var rO=function(e,t){let r,n,a,i,s,o,l,h,d,c,f,u,p,w,g,m,b,y,v,k,x,E,R,z,S=e.state;r=e.next_in,R=e.input,n=r+(e.avail_in-5),a=e.next_out,z=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=S.dmax,l=S.wsize,h=S.whave,d=S.wnext,c=S.window,f=S.hold,u=S.bits,p=S.lencode,w=S.distcode,g=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;e:do for(u<15&&(f+=R[r++]<<u,u+=8,f+=R[r++]<<u,u+=8),b=p[f&g];;){if(f>>>=y=b>>>24,u-=y,0==(y=b>>>16&255))z[a++]=65535&b;else if(16&y)for(v=65535&b,(y&=15)&&(u<y&&(f+=R[r++]<<u,u+=8),v+=f&(1<<y)-1,f>>>=y,u-=y),u<15&&(f+=R[r++]<<u,u+=8,f+=R[r++]<<u,u+=8),b=w[f&m];;){if(f>>>=y=b>>>24,u-=y,16&(y=b>>>16&255)){if(k=65535&b,u<(y&=15)&&(f+=R[r++]<<u,(u+=8)<y&&(f+=R[r++]<<u,u+=8)),(k+=f&(1<<y)-1)>o){e.msg="invalid distance too far back",S.mode=rA;break e}if(f>>>=y,u-=y,k>(y=a-i)){if((y=k-y)>h&&S.sane){e.msg="invalid distance too far back",S.mode=rA;break e}if(x=0,E=c,0===d){if(x+=l-y,y<v){v-=y;do z[a++]=c[x++];while(--y);x=a-k,E=z}}else if(d<y){if(x+=l+d-y,(y-=d)<v){v-=y;do z[a++]=c[x++];while(--y);if(x=0,d<v){v-=y=d;do z[a++]=c[x++];while(--y);x=a-k,E=z}}}else if(x+=d-y,y<v){v-=y;do z[a++]=c[x++];while(--y);x=a-k,E=z}for(;v>2;)z[a++]=E[x++],z[a++]=E[x++],z[a++]=E[x++],v-=3;v&&(z[a++]=E[x++],v>1&&(z[a++]=E[x++]))}else{x=a-k;do z[a++]=z[x++],z[a++]=z[x++],z[a++]=z[x++],v-=3;while(v>2);v&&(z[a++]=z[x++],v>1&&(z[a++]=z[x++]))}}else if((64&y)==0){b=w[(65535&b)+(f&(1<<y)-1)];continue}else{e.msg="invalid distance code",S.mode=rA;break e}break}else if((64&y)==0){b=p[(65535&b)+(f&(1<<y)-1)];continue}else if(32&y){S.mode=rT;break e}else{e.msg="invalid literal/length code",S.mode=rA;break e}break}while(r<n&&a<s);r-=v=u>>3,u-=v<<3,f&=(1<<u)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=a<s?257+(s-a):257-(a-s),S.hold=f,S.bits=u};let rM=15,rP=852,rN=592,r$=0,rC=1,rH=2,rD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rI=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),rZ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var rB=(e,t,r,n,a,i,s,o)=>{let l,h,d,c,f,u,p,w,g,m=o.bits,b=0,y=0,v=0,k=0,x=0,E=0,R=0,z=0,S=0,U=0,L=null,A=new Uint16Array(rM+1),T=new Uint16Array(rM+1),O=null;for(b=0;b<=rM;b++)A[b]=0;for(y=0;y<n;y++)A[t[r+y]]++;for(x=m,k=rM;k>=1&&0===A[k];k--);if(x>k&&(x=k),0===k)return a[i++]=0x1400000,a[i++]=0x1400000,o.bits=1,0;for(v=1;v<k&&0===A[v];v++);for(x<v&&(x=v),z=1,b=1;b<=rM;b++)if(z<<=1,(z-=A[b])<0)return -1;if(z>0&&(e===r$||1!==k))return -1;for(b=1,T[1]=0;b<rM;b++)T[b+1]=T[b]+A[b];for(y=0;y<n;y++)0!==t[r+y]&&(s[T[t[r+y]]++]=y);if(e===r$?(L=O=s,u=20):e===rC?(L=rD,O=rI,u=257):(L=rj,O=rZ,u=0),U=0,y=0,b=v,f=i,E=x,R=0,d=-1,c=(S=1<<x)-1,e===rC&&S>rP||e===rH&&S>rN)return 1;for(;;){p=b-R,s[y]+1<u?(w=0,g=s[y]):s[y]>=u?(w=O[s[y]-u],g=L[s[y]-u]):(w=96,g=0),l=1<<b-R,v=h=1<<E;do a[f+(U>>R)+(h-=l)]=p<<24|w<<16|g;while(0!==h);for(l=1<<b-1;U&l;)l>>=1;if(0!==l?(U&=l-1,U+=l):U=0,y++,0==--A[b]){if(b===k)break;b=t[r+s[y]]}if(b>x&&(U&c)!==d){for(0===R&&(R=x),f+=v,z=1<<(E=b-R);E+R<k&&!((z-=A[E+R])<=0);)E++,z<<=1;if(S+=1<<E,e===rC&&S>rP||e===rH&&S>rN)return 1;a[d=U&c]=x<<24|E<<16|f-i}}return 0!==U&&(a[f+U]=b-R<<24|4194304),o.bits=x,0};let rF=0,rW=1,rq=2,{Z_FINISH:rG,Z_BLOCK:rX,Z_TREES:rK,Z_OK:rY,Z_STREAM_END:rV,Z_NEED_DICT:rJ,Z_STREAM_ERROR:rQ,Z_DATA_ERROR:r0,Z_MEM_ERROR:r1,Z_BUF_ERROR:r2,Z_DEFLATED:r5}=e4,r6=16180,r3=16181,r8=16182,r4=16183,r9=16184,r7=16185,ne=16186,nt=16187,nr=16188,nn=16189,na=16190,ni=16191,ns=16192,no=16193,nl=16194,nh=16195,nd=16196,nc=16197,nf=16198,nu=16199,n_=16200,np=16201,nw=16202,ng=16203,nm=16204,nb=16205,ny=16206,nv=16207,nk=16208,nx=16209,nE=16210,nR=16211,nz=852,nS=592,nU=15,nL=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function nA(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let nT=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<r6||t.mode>nR)},nO=e=>{if(nT(e))return rQ;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=r6,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(nz),t.distcode=t.distdyn=new Int32Array(nS),t.sane=1,t.back=-1,rY},nM=e=>{if(nT(e))return rQ;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,nO(e)},nP=(e,t)=>{let r;if(nT(e))return rQ;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?rQ:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,nM(e))},nN=(e,t)=>{if(!e)return rQ;let r=new nA;e.state=r,r.strm=e,r.window=null,r.mode=r6;let n=nP(e,t);return n!==rY&&(e.state=null),n},n$=!0,nC=e=>{if(n$){n=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(rB(rW,e.lens,0,288,n,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;rB(rq,e.lens,0,32,a,0,e.work,{bits:5}),n$=!1}e.lencode=n,e.lenbits=9,e.distcode=a,e.distbits=5},nH=(e,t,r,n)=>{let a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var nD={inflateReset:nM,inflateInit2:nN,inflate:(e,t)=>{let r,n,a,i,s,o,l,h,d,c,f,u,p,w,g,m,b,y,v,k,x,E,R,z,S=0,U=new Uint8Array(4),L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nT(e)||!e.output||!e.input&&0!==e.avail_in)return rQ;(r=e.state).mode===ni&&(r.mode=ns),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,h=r.hold,d=r.bits,c=o,f=l,E=rY;t:for(;;)switch(r.mode){case r6:if(0===r.wrap){r.mode=ns;break}for(;d<16;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(2&r.wrap&&35615===h){0===r.wbits&&(r.wbits=15),r.check=0,U[0]=255&h,U[1]=h>>>8&255,r.check=e3(r.check,U,2,0),h=0,d=0,r.mode=r3;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=nx;break}if((15&h)!==r5){e.msg="unknown compression method",r.mode=nx;break}if(h>>>=4,d-=4,x=(15&h)+8,0===r.wbits&&(r.wbits=x),x>15||x>r.wbits){e.msg="invalid window size",r.mode=nx;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&h?nn:ni,h=0,d=0;break;case r3:for(;d<16;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(r.flags=h,(255&r.flags)!==r5){e.msg="unknown compression method",r.mode=nx;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=nx;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&4&r.wrap&&(U[0]=255&h,U[1]=h>>>8&255,r.check=e3(r.check,U,2,0)),h=0,d=0,r.mode=r8;case r8:for(;d<32;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.head&&(r.head.time=h),512&r.flags&&4&r.wrap&&(U[0]=255&h,U[1]=h>>>8&255,U[2]=h>>>16&255,U[3]=h>>>24&255,r.check=e3(r.check,U,4,0)),h=0,d=0,r.mode=r4;case r4:for(;d<16;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&4&r.wrap&&(U[0]=255&h,U[1]=h>>>8&255,r.check=e3(r.check,U,2,0)),h=0,d=0,r.mode=r9;case r9:if(1024&r.flags){for(;d<16;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&4&r.wrap&&(U[0]=255&h,U[1]=h>>>8&255,r.check=e3(r.check,U,2,0)),h=0,d=0}else r.head&&(r.head.extra=null);r.mode=r7;case r7:if(1024&r.flags&&((u=r.length)>o&&(u=o),u&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+u),x)),512&r.flags&&4&r.wrap&&(r.check=e3(r.check,n,u,i)),o-=u,i+=u,r.length-=u),r.length))break t;r.length=0,r.mode=ne;case ne:if(2048&r.flags){if(0===o)break t;u=0;do x=n[i+u++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x));while(x&&u<o);if(512&r.flags&&4&r.wrap&&(r.check=e3(r.check,n,u,i)),o-=u,i+=u,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=nt;case nt:if(4096&r.flags){if(0===o)break t;u=0;do x=n[i+u++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x));while(x&&u<o);if(512&r.flags&&4&r.wrap&&(r.check=e3(r.check,n,u,i)),o-=u,i+=u,x)break t}else r.head&&(r.head.comment=null);r.mode=nr;case nr:if(512&r.flags){for(;d<16;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(4&r.wrap&&h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=nx;break}h=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ni;break;case nn:for(;d<32;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}e.adler=r.check=nL(h),h=0,d=0,r.mode=na;case na:if(0===r.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=h,r.bits=d,rJ;e.adler=r.check=1,r.mode=ni;case ni:if(t===rX||t===rK)break t;case ns:if(r.last){h>>>=7&d,d-=7&d,r.mode=ny;break}for(;d<3;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}switch(r.last=1&h,d-=1,3&(h>>>=1)){case 0:r.mode=no;break;case 1:if(nC(r),r.mode=nu,t===rK){h>>>=2,d-=2;break t}break;case 2:r.mode=nd;break;case 3:e.msg="invalid block type",r.mode=nx}h>>>=2,d-=2;break;case no:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=nx;break}if(r.length=65535&h,h=0,d=0,r.mode=nl,t===rK)break t;case nl:r.mode=nh;case nh:if(u=r.length){if(u>o&&(u=o),u>l&&(u=l),0===u)break t;a.set(n.subarray(i,i+u),s),o-=u,i+=u,l-=u,s+=u,r.length-=u;break}r.mode=ni;break;case nd:for(;d<14;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(r.nlen=(31&h)+257,d-=5,r.ndist=(31&(h>>>=5))+1,d-=5,r.ncode=(15&(h>>>=5))+4,h>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=nx;break}r.have=0,r.mode=nc;case nc:for(;r.have<r.ncode;){for(;d<3;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.lens[L[r.have++]]=7&h,h>>>=3,d-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},E=rB(rF,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,E){e.msg="invalid code lengths set",r.mode=nx;break}r.have=0,r.mode=nf;case nf:for(;r.have<r.nlen+r.ndist;){for(;g=(S=r.lencode[h&(1<<r.lenbits)-1])>>>24,m=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(b<16)h>>>=g,d-=g,r.lens[r.have++]=b;else{if(16===b){for(z=g+2;d<z;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(h>>>=g,d-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=nx;break}x=r.lens[r.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===b){for(z=g+3;d<z;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}h>>>=g,d-=g,x=0,u=3+(7&h),h>>>=3,d-=3}else{for(z=g+7;d<z;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}h>>>=g,d-=g,x=0,u=11+(127&h),h>>>=7,d-=7}if(r.have+u>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=nx;break}for(;u--;)r.lens[r.have++]=x}}if(r.mode===nx)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=nx;break}if(r.lenbits=9,R={bits:r.lenbits},E=rB(rW,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,E){e.msg="invalid literal/lengths set",r.mode=nx;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},E=rB(rq,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,E){e.msg="invalid distances set",r.mode=nx;break}if(r.mode=nu,t===rK)break t;case nu:r.mode=n_;case n_:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=h,r.bits=d,rO(e,f),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,h=r.hold,d=r.bits,r.mode===ni&&(r.back=-1);break}for(r.back=0;g=(S=r.lencode[h&(1<<r.lenbits)-1])>>>24,m=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(m&&(240&m)==0){for(y=g,v=m,k=b;g=(S=r.lencode[k+((h&(1<<y+v)-1)>>y)])>>>24,m=S>>>16&255,b=65535&S,!(y+g<=d);){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}h>>>=y,d-=y,r.back+=y}if(h>>>=g,d-=g,r.back+=g,r.length=b,0===m){r.mode=nb;break}if(32&m){r.back=-1,r.mode=ni;break}if(64&m){e.msg="invalid literal/length code",r.mode=nx;break}r.extra=15&m,r.mode=np;case np:if(r.extra){for(z=r.extra;d<z;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=nw;case nw:for(;g=(S=r.distcode[h&(1<<r.distbits)-1])>>>24,m=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if((240&m)==0){for(y=g,v=m,k=b;g=(S=r.distcode[k+((h&(1<<y+v)-1)>>y)])>>>24,m=S>>>16&255,b=65535&S,!(y+g<=d);){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}h>>>=y,d-=y,r.back+=y}if(h>>>=g,d-=g,r.back+=g,64&m){e.msg="invalid distance code",r.mode=nx;break}r.offset=b,r.extra=15&m,r.mode=ng;case ng:if(r.extra){for(z=r.extra;d<z;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=nx;break}r.mode=nm;case nm:if(0===l)break t;if(u=f-l,r.offset>u){if((u=r.offset-u)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=nx;break}u>r.wnext?(u-=r.wnext,p=r.wsize-u):p=r.wnext-u,u>r.length&&(u=r.length),w=r.window}else w=a,p=s-r.offset,u=r.length;u>l&&(u=l),l-=u,r.length-=u;do a[s++]=w[p++];while(--u);0===r.length&&(r.mode=n_);break;case nb:if(0===l)break t;a[s++]=r.length,l--,r.mode=n_;break;case ny:if(r.wrap){for(;d<32;){if(0===o)break t;o--,h|=n[i++]<<d,d+=8}if(f-=l,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?e3(r.check,a,f,s-f):e5(r.check,a,f,s-f)),f=l,4&r.wrap&&(r.flags?h:nL(h))!==r.check){e.msg="incorrect data check",r.mode=nx;break}h=0,d=0}r.mode=nv;case nv:if(r.wrap&&r.flags){for(;d<32;){if(0===o)break t;o--,h+=n[i++]<<d,d+=8}if(4&r.wrap&&h!==(0|r.total)){e.msg="incorrect length check",r.mode=nx;break}h=0,d=0}r.mode=nk;case nk:E=rV;break t;case nx:E=r0;break t;case nE:return r1;default:return rQ}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=h,r.bits=d,(r.wsize||f!==e.avail_out&&r.mode<nx&&(r.mode<ny||t!==rG))&&nH(e,e.output,e.next_out,f-e.avail_out),c-=e.avail_in,f-=e.avail_out,e.total_in+=c,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?e3(r.check,a,f,e.next_out-f):e5(r.check,a,f,e.next_out-f)),e.data_type=r.bits+64*!!r.last+128*(r.mode===ni)+256*(r.mode===nu||r.mode===nl),(0===c&&0===f||t===rG)&&E===rY&&(E=r2),E},inflateEnd:e=>{if(nT(e))return rQ;let t=e.state;return t.window&&(t.window=null),e.state=null,rY},inflateGetHeader:(e,t)=>{if(nT(e))return rQ;let r=e.state;return(2&r.wrap)==0?rQ:(r.head=t,t.done=!1,rY)},inflateSetDictionary:(e,t)=>{let r,n,a=t.length;return nT(e)||0!==(r=e.state).wrap&&r.mode!==na?rQ:r.mode===na&&(n=e5(n=1,t,a,0))!==r.check?r0:nH(e,t,a,a)?(r.mode=nE,r1):(r.havedict=1,rY)}},nI=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let nj=Object.prototype.toString,{Z_NO_FLUSH:nZ,Z_FINISH:nB,Z_OK:nF,Z_STREAM_END:nW,Z_NEED_DICT:nq,Z_STREAM_ERROR:nG,Z_DATA_ERROR:nX,Z_MEM_ERROR:nK}=e4;function nY(e){this.options=rh.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r_,this.strm.avail_out=0;let r=nD.inflateInit2(this.strm,t.windowBits);if(r!==nF||(this.header=new nI,nD.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ru.string2buf(t.dictionary):"[object ArrayBuffer]"===nj.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=nD.inflateSetDictionary(this.strm,t.dictionary))!==nF))throw Error(e8[r])}function nV(e,t){let r=new nY(t);if(r.push(e),r.err)throw r.msg||e8[r.err];return r.result}function nJ(e,t){return(t=t||{}).raw=!0,nV(e,t)}nY.prototype.push=function(e,t){let r,n,a,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?nB:nZ,"[object ArrayBuffer]"===nj.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r=nD.inflate(i,n))===nq&&o&&((r=nD.inflateSetDictionary(i,o))===nF?r=nD.inflate(i,n):r===nX&&(r=nq));i.avail_in>0&&r===nW&&i.state.wrap>0&&0!==e[i.next_in];)nD.inflateReset(i),r=nD.inflate(i,n);switch(r){case nG:case nX:case nq:case nK:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===nW))if("string"===this.options.to){let e=ru.utf8border(i.output,i.next_out),t=i.next_out-e,r=ru.buf2string(i.output,e);i.next_out=t,i.avail_out=s-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==nF||0!==a){if(r===nW)return r=nD.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},nY.prototype.onData=function(e){this.chunks.push(e)},nY.prototype.onEnd=function(e){e===nF&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=rh.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:nQ,deflate:n0,deflateRaw:n1,gzip:n2}=rL,{Inflate:n5,inflate:n6,inflateRaw:n3,ungzip:n8}={Inflate:nY,inflate:nV,inflateRaw:nJ,ungzip:nV,constants:e4};var n4=n3;let n9=new Y,n7=new TextDecoder,ae=new Uint8Array([0,0,255,255]);globalThis.WebSocket=new Proxy(globalThis.WebSocket,{construct(e,t){let[r,n]=t,a=n9.createWebSocket(r,n,null,{"User-Agent":self.navigator.userAgent,origin:self.scope$location.origin});class i extends EventTarget{binaryType="blob";bufferedAmount=0;extensions="";onclose=null;onerror=null;onmessage=null;onopen=null;protocol="";readyState=0;url=r;#e;constructor(){super(),this.#e=a,this.readyState=this.#e.readyState,this.protocol=this.#e.protocol,this.#e.addEventListener("open",e=>{this.readyState=1,this.#t("open",e)}),this.#e.addEventListener("close",e=>{this.readyState=3,this.#t("close",e)}),this.#e.addEventListener("error",e=>{this.#t("error",e)}),this.#e.addEventListener("message",async e=>{let t=e.data;if("string"==typeof t||(t instanceof Blob?"arraybuffer"===this.binaryType&&Object.setPrototypeOf(t=await t.arrayBuffer(),ArrayBuffer.prototype):(t instanceof ArrayBuffer||t instanceof Uint8Array)&&("blob"===this.binaryType?t=new Blob([t]):Object.setPrototypeOf(t,ArrayBuffer.prototype))),t instanceof ArrayBuffer||t instanceof Uint8Array){let e=t instanceof Uint8Array?t:new Uint8Array(t);if(e.length>=4&&e.slice(-4).every((e,t)=>e===ae[t]))try{let t=e.slice(0,-4),r=n4(t),n=n7.decode(r);this.#t("message",new MessageEvent("message",{data:n}));return}catch{}try{let t=n7.decode(e);if(t.startsWith("{")||t.startsWith("["))return void this.#t("message",new MessageEvent("message",{data:t}))}catch{}}this.#t("message",new MessageEvent("message",{data:t}))})}send(e){this.#e.send(e)}close(e,t){this.#e.close(e,t)}#t(e,t){let r,n=new Proxy(r=t instanceof MessageEvent?new MessageEvent(e,{data:t.data}):t instanceof CloseEvent?new CloseEvent(e,{code:t.code,reason:t.reason,wasClean:t.wasClean}):t instanceof ErrorEvent?new ErrorEvent(e,{message:t.message,error:t.error}):new Event(e),{get:(e,t)=>"isTrusted"===t||Reflect.get(e,t)}),a=this["on"+e];"function"==typeof a&&a.call(this,n),this.dispatchEvent(r)}}return new i}})})()})();
//# sourceMappingURL=en.client.js.map